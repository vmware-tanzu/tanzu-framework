<form [formGroup]="formGroup" *ngIf="displayForm">
    <div *ngIf="errorNotification" class="alert alert-danger" role="alert">
        <div class="alert-items">
            <div class="alert-item static">
                <div class="alert-icon-wrapper">
                    <clr-icon class="alert-icon" shape="exclamation-circle"></clr-icon>
                </div>
                <span class="alert-text">
                    {{ errorNotification }}
                </span>
            </div>
        </div>
        <button (click)="errorNotification = null" type="button" class="close" aria-label="Close">
            <clr-icon aria-hidden="true" shape="close"></clr-icon>
        </button>
    </div>

    <h4 i18n="management cluster settings" aria-level="2">
        Management Cluster Settings
    </h4>

    <div class="clr-row">
        <div class="clr-col-lg-6 clr-col-12">
            <a class="card clickable" [ngClass]="{'card-selected': getEnvType()==='dev'}" (click)="cardClick('dev')"
                role="none">
                <div class="card-block">
                    <clr-icon class="card-icon" shape="computer" size="72">
                    </clr-icon>
                    <p class="card-title" i18n="development control plane title">
                        Development
                    </p>
                    <p i18n="development description" class="card-text">
                        Single control plane node. Recommended for a development environment.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="clr-row" [attr.data-step-metadata]="formName">
                        <div class="clr-col-lg-5 clr-col-12">
                            <label i18n="instance type label" data-full="Development instance type">
                                INSTANCE TYPE
                                <clr-tooltip>
                                    <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22">
                                    </clr-icon>
                                    <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                        <span>
                                            Choose the configuration for the control plane node VMs depending on
                                            the expected number of workload clusters to manage.
                                        </span>
                                    </clr-tooltip-content>
                                </clr-tooltip>
                            </label>
                        </div>
                        <div class="clr-col-lg-7 clr-col-12">
                            <clr-select-container class="node-type-container">
                                <select clrSelect class="node-type-select" name="devInstanceType"
                                    formControlName="devInstanceType" role="listbox"
                                    aria-label="development instance type">
                                    <option aria-label="blank"></option>
                                    <ng-container *ngFor="let nodeType of nodeTypes">
                                        <option [value]="nodeType.id">
                                            {{nodeType.name}}
                                        </option>
                                    </ng-container>
                                </select>
                                <clr-control-error>Selecting an instance type is required</clr-control-error>
                            </clr-select-container>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="clr-col-lg-6 clr-col-12">
            <a class="card clickable" [ngClass]="{'card-selected': getEnvType()==='prod'}" (click)="cardClick('prod')"
                role="none">
                <div class="card-block">
                    <clr-icon class="card-icon" shape="building" size="72">
                    </clr-icon>
                    <p class="card-title" i18n="production control plane title">
                        Production
                    </p>
                    <p i18n="production description" class="card-text">
                        Three control plane nodes. Recommended for a production environment.
                    </p>
                </div>
                <div class="card-footer">
                    <div class="clr-row" [attr.data-step-metadata]="formName">
                        <div class="clr-col-lg-5 clr-col-12">
                            <label i18n="instance type label" data-full="Production instance type">
                                INSTANCE TYPE
                                <clr-tooltip>
                                    <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22">
                                    </clr-icon>
                                    <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                                        <span>
                                            Choose the configuration for the control plane node VMs depending on
                                            the expected number of workload clusters to manage.
                                        </span>
                                    </clr-tooltip-content>
                                </clr-tooltip>
                            </label>
                        </div>
                        <div class="clr-col-lg-7 clr-col-12">
                            <clr-select-container class="node-type-container">
                                <select clrSelect class="node-type-select" name="prodInstanceType"
                                    formControlName="prodInstanceType" role="listbox"
                                    aria-label="production instance type">
                                    <option aria-label="blank"></option>
                                    <ng-container *ngFor="let nodeType of nodeTypes">
                                        <option [value]="nodeType.id">
                                            {{nodeType.name}}
                                        </option>
                                    </ng-container>
                                </select>
                                <clr-control-error>Selecting an instance type is required</clr-control-error>
                            </clr-select-container>
                        </div>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="clr-row">
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-input-container [attr.data-step-metadata]="formName">
                <label i18n="management cluster name label" clr-control-label>
                    MANAGEMENT CLUSTER NAME (OPTIONAL)
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                Optionally specify a name for the management cluster. If left blank,
                                the installer names the cluster automatically.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <input clrInput formControlName="clusterName" placeholder="optional" maxlength="42" />
                <!-- Add a empty helper to avoid accessiblity aira-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="management cluster name valid msg"
                    *clrIfError="validatorEnum.VALID_CLUSTER_NAME">
                    Management Cluster Name must consist of lower case alphanumeric characters, '-' or '.', and must
                    start
                    and end with an alphanumeric character.
                </clr-control-error>
                <clr-control-error i18n="management cluster name valid msg" *clrIfError="validatorEnum.WHITESPACE">
                    Management Cluster Name must not include whitespace on ends.
                </clr-control-error>
            </clr-input-container>
        </div>
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-checkbox-container [attr.data-step-metadata]="formName">
                <label i18n="management cluster enable machine health check" clr-control-label
                    data-full="ENABLE MACHINE HEALTH CHECKS">
                    MACHINE HEALTH CHECKS
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-left" clrSize="lg" *clrIfOpen>
                            <span>
                                Enable Machine Health Checks to provide node health monitoring on the clusters that you
                                deploy
                                with this management cluster.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <clr-checkbox-wrapper>
                    <input type="checkbox" clrCheckbox name="machineHealthChecksEnabled"
                        formControlName="machineHealthChecksEnabled" role="checkbox"
                        aria-label="Enable Machine Health Checks" />
                    <label>Enable</label>
                </clr-checkbox-wrapper>
            </clr-checkbox-container>
        </div>
    </div>

    <div class="clr-row">
        <div class="clr-col-4">
            <clr-select-container [attr.data-step-metadata]="formName">
                <label i18n="Control Plane Endpoint Provider label" clr-control-label>
                    CONTROL PLANE ENDPOINT PROVIDER
                    <clr-tooltip>
                        <clr-icon clrTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                Select Control Plane Endpoint Provider.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <select clrSelect name="controlPlaneEndpointProvider" formControlName="controlPlaneEndpointProvider">
                    <ng-container *ngFor="let cpep of controlPlaneEndpointProviders">
                        <option [value]="cpep">
                            {{ cpep }}
                        </option>
                    </ng-container>
                </select>
                <clr-control-error>Selecting a Control Plane Endpoint Provider is required</clr-control-error>
            </clr-select-container>
        </div>

        <div class="clr-col-4">
            <clr-input-container [attr.data-step-metadata]="formName">
                <label class="hidden" i18n="load balancer template label">
                    CONTROL PLANE ENDPOINT
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                This IP address or FQDN is used by the Kube-vip (https://kube-vip.io/) pod that runs in
                                the control plane nodes.
                                Kube-vip provides load balancing services for the Cluster API server.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <input clrInput formControlName="controlPlaneEndpointIP" placeholder="" />
                <!-- Add a empty helper to avoid accessiblity aira-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error i18n="control plane endpoint required msg" *clrIfError="validatorEnum.REQUIRED">
                    control plane endpoint is required
                </clr-control-error>
                <clr-control-error i18n="control plane endpoint format msg"
                    *clrIfError="validatorEnum.VALID_IP_OR_FQDN">
                    control plane endpoint format is invalid
                </clr-control-error>
            </clr-input-container>
        </div>
    </div>

    <div class="clr-row">
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <clr-select-container class="ha-template" [attr.data-step-metadata]="formName">
                <label class="hidden" i18n="worker node instance type label">
                    WORKER NODE INSTANCE TYPE
                    <clr-tooltip>
                        <clr-icon aria-live="assertive" a11yTooltipTrigger shape="info-circle" size="22"></clr-icon>
                        <clr-tooltip-content clrPosition="top-right" clrSize="lg" *clrIfOpen>
                            <span>
                                Choose the configuration for worker nodes.
                            </span>
                        </clr-tooltip-content>
                    </clr-tooltip>
                </label>
                <select clrSelect class="node-type-select" name="workerNodeInstanceType"
                    formControlName="workerNodeInstanceType" role="listbox" aria-label="worker node instance type">
                    <option aria-label="blank"></option>
                    <ng-container *ngFor="let nodeType of nodeTypes">
                        <option [value]="nodeType.id">
                            {{nodeType.name}}
                        </option>
                    </ng-container>
                </select>
                <!-- Add a empty helper to avoid accessiblity aira-describeby issue -->
                <clr-control-helper></clr-control-helper>
                <clr-control-error>Selecting worker instance type is required</clr-control-error>
            </clr-select-container>
        </div>
        <div class="clr-col-12 clr-col-sm-6 clr-col-lg-4">
            <app-audit-logging [formGroup]="formGroup" [formName]="formName"></app-audit-logging>
        </div>
    </div>
</form>
