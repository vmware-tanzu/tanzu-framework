
(@ def vsphere_conf(values): -@)
[Global]
secret-name = "cloud-provider-vsphere-credentials"
secret-namespace = "kube-system"
(@ if values.vsphereCPI.insecureFlag: -@)
insecure-flag = "1"
(@ else: -@)
thumbprint = "(@=values.vsphereCPI.tlsThumbprint @)"
(@ end -@)
[VirtualCenter "(@=values.vsphereCPI.server @)"]
datacenters = "(@=values.vsphereCPI.datacenter @)"
(@ if values.vsphereCPI.insecureFlag: -@)
insecure-flag = "1"
(@ else: -@)
thumbprint = "(@=values.vsphereCPI.tlsThumbprint @)"
(@ end -@)
(@ if values.vsphereCPI.nsxt.podRoutingEnabled : -@)
[Route]
router-path = "(@=values.vsphereCPI.nsxt.routes.routerPath @)"
[NSXT]
host = "(@=values.vsphereCPI.nsxt.host @)"
insecure-flag = "(@=values.vsphereCPI.nsxt.insecureFlag @)"
remote-auth = "(@=values.vsphereCPI.nsxt.remoteAuth @)"
secret-name = "(@=values.vsphereCPI.nsxt.secretName @)"
secret-namespace = "(@=values.vsphereCPI.nsxt.secretNamespace @)"
(@ if values.vsphereCPI.nsxt.clientCertData != '' and values.vsphereCPI.nsxt.clientCertKeyData != '' : -@)
client-cert-data = "(@=values.vsphereCPI.nsxt.clientCertData @)"
client-cert-key-data = "(@=values.vsphereCPI.nsxt.clientCertKeyData @)"
root-ca-data = "(@=values.vsphereCPI.nsxt.rootCAData @)"
(@ elif values.vsphereCPI.nsxt.vmcAccessToken != '' and values.vsphereCPI.nsxt.vmcAuthHost != '' : -@)
vmc-access-token = "(@=values.vsphereCPI.nsxt.vmcAccessToken @)"
vmc-auth-host = "(@=values.vsphereCPI.nsxt.vmcAuthHost @)"
(@ elif values.vsphereCPI.nsxt.username != '' and values.vsphereCPI.nsxt.password != '': -@)
username = "(@=values.vsphereCPI.nsxt.username @)"
password = "(@=values.vsphereCPI.nsxt.password @)"
(@ end -@)
(@ end -@)
(@ end -@)
